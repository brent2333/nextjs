import nc from 'next-connect'
// import cards from '../../../data/cards.json'
const cards = [
  {
    "Alias": "3424",
    "CardId": "6077297",
    "CardToken": null,
    "LastFour": "**********370069",
    "AllowedCategories": null,
    "AllowedCategoriesActive": "false",
    "AllowedDays": null,
    "AllowedDaysActive": "false",
    "AllowedTimes": null,
    "AvailableAmount": null,
    "BillingAddress": null,
    "BlockReasonDesc": "Active",
    "CardCategory": null,
    "CardCategoryID": "0",
    "CardCategoryName": null,
    "CardDistributionDate": "2022-04-01T00:00:00",
    "CardDistributionMethod": null,
    "CardExpiryDate": "2025-12-31T00:00:00",
    "CardLastUsedDate": null,
    "CardNumber": "721149902288370069",
    "CardOrderDate": null,
    "CardShipper": null,
    "ClientID": null,
    "CreatedOn": "2022-04-01T00:00:00",
    "CustomerName": null,
    "DeliveryAddress": null,
    "DeliveryFee": "0",
    "Department": null,
    "DriverLicenseNumber": null,
    "DriverLicenseState": null,
    "EmbossDriverName": null,
    "EmbossVehicleRegNum": null,
    "EmployeeNumber": null,
    "EnableAlertFlag": null,
    "EnableCustomTaxFlag": "N",
    "FleetId": "869829",
    "HostXRef": "22849474",
    "InternalAllowedDays": "0",
    "IsLimitOnCard": "false",
    "LastSaleAmount": "0",
    "LastSaleOdom": null,
    "LastUpdatedDate": "2022-04-01T00:00:00",
    "LicensePlateNumber": null,
    "LifeCycleStatus": "ACTIVATED",
    "MISC1": null,
    "MISC2": null,
    "PermanentBlockStatus": "false",
    "PrintingStatus": null,
    "ProductionDate": null,
    "ProductionFee": "0",
    "Profile": null,
    "ProfileId": "3666299",
    "ProfileName": "BP Driver 033120221",
    "PromptedIds": null,
    "PurchaseCategory": null,
    "PurchaseCategoryDescription": null,
    "RegistrationExpirationDate": null,
    "ReplaceReason": null,
    "RequestDate": "4/1/2022 7:15:13 AM",
    "SpendingLimit": null,
    "Status": "TURNED_ON",
    "StatusUpdatedOn": "2022-04-01T07:10:08",
    "SubDeptNo": null,
    "Title": "driver1",
    "Type": "Driver",
    "UpdatedOn": "2022-04-01T00:00:00",
    "User": {
      "Accounts": null,
      "ApprovalStatus": null,
      "BirstEnabled": "false",
      "Brand": null,
      "Email": null,
      "FirstName": null,
      "IsLockedAccount": "false",
      "IsNewUser": "false",
      "IsUserActive": "false",
      "LastLoginDate": "0001-01-01T00:00:00",
      "LastName": null,
      "LoginRole": null,
      "LoginStatus": null,
      "MasterId": null,
      "Password": null,
      "Phone": null,
      "ProductName": null,
      "SUIFlag": "false",
      "SelectedFleet": null,
      "ShowMaintainuser": null,
      "ShowSearch": null,
      "Title": null,
      "UpdatePrv": null,
      "UserId": "9999999999",
      "UserName": null,
      "ViewBilling": null,
      "fleetDashURL": null,
      "migrationDate": "0001-01-01T00:00:00"
    },
    "VehicleDetails": null,
    "Vin": "3424",
    "allowedCategoriesGroup": null,
    "blockReasonforCard": "A",
    "cardShippingTrackingNumber": null,
    "cardType": {
      "cardTypeId": "1",
      "title": "Driver"
    },
    "cycleAmountLimit": null,
    "cycleAmountLimitAvailable": null,
    "cycleAmountLimitHold": null,
    "cycleAmountLimitUsed": null,
    "cycleTxnLimit": null,
    "cycleTxnLimitAvailable": null,
    "cycleTxnLimitHold": null,
    "cycleTxnLimitUsed": null,
    "dailyAmountLimit": null,
    "dailyAmountLimitAvailable": null,
    "dailyAmountLimitHold": null,
    "dailyAmountLimitUsed": null,
    "dailyTxnLimit": null,
    "dailyTxnLimitAvailable": null,
    "dailyTxnLimitHold": null,
    "dailyTxnLimitUsed": null,
    "poolId": null,
    "poolIdDescription": null,
    "promptedId": null,
    "cardTrackingUrl": null
  },
  {
    "Alias": "Vehicle07",
    "CardId": "6077298",
    "CardToken": null,
    "LastFour": "**********370068",
    "AllowedCategories": null,
    "AllowedCategoriesActive": "false",
    "AllowedDays": null,
    "AllowedDaysActive": "false",
    "AllowedTimes": null,
    "AvailableAmount": null,
    "BillingAddress": null,
    "BlockReasonDesc": "Active",
    "CardCategory": null,
    "CardCategoryID": "0",
    "CardCategoryName": null,
    "CardDistributionDate": "2022-04-01T00:00:00",
    "CardDistributionMethod": null,
    "CardExpiryDate": "2025-12-31T00:00:00",
    "CardLastUsedDate": null,
    "CardNumber": "721149902288370068",
    "CardOrderDate": null,
    "CardShipper": null,
    "ClientID": null,
    "CreatedOn": "2022-04-01T00:00:00",
    "CustomerName": null,
    "DeliveryAddress": null,
    "DeliveryFee": "0",
    "Department": null,
    "DriverLicenseNumber": null,
    "DriverLicenseState": null,
    "EmbossDriverName": null,
    "EmbossVehicleRegNum": null,
    "EmployeeNumber": null,
    "EnableAlertFlag": null,
    "EnableCustomTaxFlag": "N",
    "FleetId": "869829",
    "HostXRef": "22849473",
    "InternalAllowedDays": "0",
    "IsLimitOnCard": "false",
    "LastSaleAmount": "0",
    "LastSaleOdom": null,
    "LastUpdatedDate": "2022-04-01T00:00:00",
    "LicensePlateNumber": null,
    "LifeCycleStatus": "ACTIVATED",
    "MISC1": null,
    "MISC2": null,
    "PermanentBlockStatus": "false",
    "PrintingStatus": null,
    "ProductionDate": null,
    "ProductionFee": "0",
    "Profile": null,
    "ProfileId": "2208234",
    "ProfileName": "Profile - 001",
    "PromptedIds": null,
    "PurchaseCategory": null,
    "PurchaseCategoryDescription": null,
    "RegistrationExpirationDate": null,
    "ReplaceReason": null,
    "RequestDate": "4/1/2022 7:15:12 AM",
    "SpendingLimit": null,
    "Status": "TURNED_ON",
    "StatusUpdatedOn": "2022-04-01T07:11:13",
    "SubDeptNo": null,
    "Title": "2020 Vehicle",
    "Type": "Vehicle",
    "UpdatedOn": "2022-04-01T00:00:00",
    "User": {
      "Accounts": null,
      "ApprovalStatus": null,
      "BirstEnabled": "false",
      "Brand": null,
      "Email": null,
      "FirstName": null,
      "IsLockedAccount": "false",
      "IsNewUser": "false",
      "IsUserActive": "false",
      "LastLoginDate": "0001-01-01T00:00:00",
      "LastName": null,
      "LoginRole": null,
      "LoginStatus": null,
      "MasterId": null,
      "Password": null,
      "Phone": null,
      "ProductName": null,
      "SUIFlag": "false",
      "SelectedFleet": null,
      "ShowMaintainuser": null,
      "ShowSearch": null,
      "Title": null,
      "UpdatePrv": null,
      "UserId": "9999999999",
      "UserName": null,
      "ViewBilling": null,
      "fleetDashURL": null,
      "migrationDate": "0001-01-01T00:00:00"
    },
    "VehicleDetails": null,
    "Vin": null,
    "allowedCategoriesGroup": null,
    "blockReasonforCard": "A",
    "cardShippingTrackingNumber": null,
    "cardType": {
      "cardTypeId": "2",
      "title": "Vehicle"
    },
    "cycleAmountLimit": null,
    "cycleAmountLimitAvailable": null,
    "cycleAmountLimitHold": null,
    "cycleAmountLimitUsed": null,
    "cycleTxnLimit": null,
    "cycleTxnLimitAvailable": null,
    "cycleTxnLimitHold": null,
    "cycleTxnLimitUsed": null,
    "dailyAmountLimit": null,
    "dailyAmountLimitAvailable": null,
    "dailyAmountLimitHold": null,
    "dailyAmountLimitUsed": null,
    "dailyTxnLimit": null,
    "dailyTxnLimitAvailable": null,
    "dailyTxnLimitHold": null,
    "dailyTxnLimitUsed": null,
    "poolId": null,
    "poolIdDescription": null,
    "promptedId": null,
    "cardTrackingUrl": null
  },
  {
    "Alias": "001002",
    "CardId": "4451471",
    "CardToken": null,
    "LastFour": "**********370005",
    "AllowedCategories": null,
    "AllowedCategoriesActive": "false",
    "AllowedDays": null,
    "AllowedDaysActive": "false",
    "AllowedTimes": null,
    "AvailableAmount": null,
    "BillingAddress": null,
    "BlockReasonDesc": "Replaced",
    "CardCategory": null,
    "CardCategoryID": "0",
    "CardCategoryName": null,
    "CardDistributionDate": "2003-07-22T00:00:00",
    "CardDistributionMethod": null,
    "CardExpiryDate": "2018-07-31T00:00:00",
    "CardLastUsedDate": "2017-05-25T18:57:00",
    "CardNumber": "721149902288370005",
    "CardOrderDate": null,
    "CardShipper": null,
    "ClientID": null,
    "CreatedOn": "2003-07-22T00:00:00",
    "CustomerName": null,
    "DeliveryAddress": null,
    "DeliveryFee": "0",
    "Department": null,
    "DriverLicenseNumber": null,
    "DriverLicenseState": null,
    "EmbossDriverName": null,
    "EmbossVehicleRegNum": null,
    "EmployeeNumber": null,
    "EnableAlertFlag": "N",
    "EnableCustomTaxFlag": "N",
    "FleetId": "869829",
    "HostXRef": "10354598",
    "InternalAllowedDays": "0",
    "IsLimitOnCard": "false",
    "LastSaleAmount": "35.22",
    "LastSaleOdom": "0",
    "LastUpdatedDate": "2020-05-01T00:00:00",
    "LicensePlateNumber": null,
    "LifeCycleStatus": "ACTIVATED",
    "MISC1": null,
    "MISC2": null,
    "PermanentBlockStatus": "true",
    "PrintingStatus": null,
    "ProductionDate": null,
    "ProductionFee": "0",
    "Profile": null,
    "ProfileId": "2208234",
    "ProfileName": "Profile - 001",
    "PromptedIds": null,
    "PurchaseCategory": null,
    "PurchaseCategoryDescription": null,
    "RegistrationExpirationDate": null,
    "ReplaceReason": null,
    "RequestDate": null,
    "SpendingLimit": null,
    "Status": "TURNED_OFF",
    "StatusUpdatedOn": "2020-05-01T08:24:36",
    "SubDeptNo": null,
    "Title": "No Description",
    "Type": "Vehicle",
    "UpdatedOn": "2020-05-01T00:00:00",
    "User": {
      "Accounts": null,
      "ApprovalStatus": null,
      "BirstEnabled": "false",
      "Brand": null,
      "Email": null,
      "FirstName": null,
      "IsLockedAccount": "false",
      "IsNewUser": "false",
      "IsUserActive": "false",
      "LastLoginDate": "0001-01-01T00:00:00",
      "LastName": null,
      "LoginRole": null,
      "LoginStatus": null,
      "MasterId": null,
      "Password": null,
      "Phone": null,
      "ProductName": null,
      "SUIFlag": "false",
      "SelectedFleet": null,
      "ShowMaintainuser": null,
      "ShowSearch": null,
      "Title": null,
      "UpdatePrv": null,
      "UserId": "9999999999",
      "UserName": null,
      "ViewBilling": null,
      "fleetDashURL": null,
      "migrationDate": "0001-01-01T00:00:00"
    },
    "VehicleDetails": null,
    "Vin": null,
    "allowedCategoriesGroup": null,
    "blockReasonforCard": "REPLACED",
    "cardShippingTrackingNumber": null,
    "cardType": {
      "cardTypeId": "2",
      "title": "Vehicle"
    },
    "cycleAmountLimit": null,
    "cycleAmountLimitAvailable": null,
    "cycleAmountLimitHold": null,
    "cycleAmountLimitUsed": null,
    "cycleTxnLimit": null,
    "cycleTxnLimitAvailable": null,
    "cycleTxnLimitHold": null,
    "cycleTxnLimitUsed": null,
    "dailyAmountLimit": null,
    "dailyAmountLimitAvailable": null,
    "dailyAmountLimitHold": null,
    "dailyAmountLimitUsed": null,
    "dailyTxnLimit": null,
    "dailyTxnLimitAvailable": null,
    "dailyTxnLimitHold": null,
    "dailyTxnLimitUsed": null,
    "poolId": null,
    "poolIdDescription": null,
    "promptedId": null,
    "cardTrackingUrl": null
  },
  {
    "Alias": "001002",
    "CardId": "7367063",
    "CardToken": null,
    "LastFour": "**********370007",
    "AllowedCategories": null,
    "AllowedCategoriesActive": "false",
    "AllowedDays": null,
    "AllowedDaysActive": "false",
    "AllowedTimes": null,
    "AvailableAmount": null,
    "BillingAddress": null,
    "BlockReasonDesc": "Active",
    "CardCategory": null,
    "CardCategoryID": "0",
    "CardCategoryName": null,
    "CardDistributionDate": "2020-05-01T00:00:00",
    "CardDistributionMethod": null,
    "CardExpiryDate": "2025-07-31T00:00:00",
    "CardLastUsedDate": "2021-08-06T08:52:00",
    "CardNumber": "721149902288370007",
    "CardOrderDate": null,
    "CardShipper": null,
    "ClientID": null,
    "CreatedOn": "2020-05-01T00:00:00",
    "CustomerName": null,
    "DeliveryAddress": null,
    "DeliveryFee": "0",
    "Department": null,
    "DriverLicenseNumber": null,
    "DriverLicenseState": null,
    "EmbossDriverName": null,
    "EmbossVehicleRegNum": null,
    "EmployeeNumber": null,
    "EnableAlertFlag": "N",
    "EnableCustomTaxFlag": "N",
    "FleetId": "869829",
    "HostXRef": "20275222",
    "InternalAllowedDays": "0",
    "IsLimitOnCard": "false",
    "LastSaleAmount": "36.02",
    "LastSaleOdom": "0",
    "LastUpdatedDate": "2020-05-01T00:00:00",
    "LicensePlateNumber": null,
    "LifeCycleStatus": "ACTIVATED",
    "MISC1": null,
    "MISC2": null,
    "PermanentBlockStatus": "false",
    "PrintingStatus": null,
    "ProductionDate": null,
    "ProductionFee": "0",
    "Profile": null,
    "ProfileId": "2208234",
    "ProfileName": "Profile - 001",
    "PromptedIds": null,
    "PurchaseCategory": null,
    "PurchaseCategoryDescription": null,
    "RegistrationExpirationDate": null,
    "ReplaceReason": null,
    "RequestDate": null,
    "SpendingLimit": null,
    "Status": "TURNED_ON",
    "StatusUpdatedOn": "2020-05-01T08:24:36",
    "SubDeptNo": null,
    "Title": "No Description",
    "Type": "Vehicle",
    "UpdatedOn": "2020-05-01T00:00:00",
    "User": {
      "Accounts": null,
      "ApprovalStatus": null,
      "BirstEnabled": "false",
      "Brand": null,
      "Email": null,
      "FirstName": null,
      "IsLockedAccount": "false",
      "IsNewUser": "false",
      "IsUserActive": "false",
      "LastLoginDate": "0001-01-01T00:00:00",
      "LastName": null,
      "LoginRole": null,
      "LoginStatus": null,
      "MasterId": null,
      "Password": null,
      "Phone": null,
      "ProductName": null,
      "SUIFlag": "false",
      "SelectedFleet": null,
      "ShowMaintainuser": null,
      "ShowSearch": null,
      "Title": null,
      "UpdatePrv": null,
      "UserId": "9999999999",
      "UserName": null,
      "ViewBilling": null,
      "fleetDashURL": null,
      "migrationDate": "0001-01-01T00:00:00"
    },
    "VehicleDetails": null,
    "Vin": null,
    "allowedCategoriesGroup": null,
    "blockReasonforCard": "A",
    "cardShippingTrackingNumber": null,
    "cardType": {
      "cardTypeId": "2",
      "title": "Vehicle"
    },
    "cycleAmountLimit": null,
    "cycleAmountLimitAvailable": null,
    "cycleAmountLimitHold": null,
    "cycleAmountLimitUsed": null,
    "cycleTxnLimit": null,
    "cycleTxnLimitAvailable": null,
    "cycleTxnLimitHold": null,
    "cycleTxnLimitUsed": null,
    "dailyAmountLimit": null,
    "dailyAmountLimitAvailable": null,
    "dailyAmountLimitHold": null,
    "dailyAmountLimitUsed": null,
    "dailyTxnLimit": null,
    "dailyTxnLimitAvailable": null,
    "dailyTxnLimitHold": null,
    "dailyTxnLimitUsed": null,
    "poolId": null,
    "poolIdDescription": null,
    "promptedId": null,
    "cardTrackingUrl": null
  }
]
const UIStatus = {
    ACTIVE: "active",
    EXPIRED: "expired",
    HOLD: "hold",
    BLOCKED: "blocked",
    PENDING: "pending",
    OTHER: "other"
  };
const statusMap =  {
    A: UIStatus.ACTIVE,
    "A/R REASON": UIStatus.HOLD,
    CLOSED: UIStatus.HOLD,
    CONVERTED: UIStatus.HOLD,
    CUST: UIStatus.BLOCKED,
    DAMAGED: UIStatus.BLOCKED,
    DESTROYED: UIStatus.HOLD,
    DRAGNET: UIStatus.HOLD,
    EXPIRED: UIStatus.HOLD,
    FRAUD: UIStatus.BLOCKED,
    INACTIVE: UIStatus.HOLD,
    INACTIVITY: UIStatus.HOLD,
    LOST: UIStatus.BLOCKED,
    "LOST/STOLEN": UIStatus.HOLD,
    OTHER: UIStatus.HOLD,
    PENDING: UIStatus.PENDING,
    Replace: UIStatus.BLOCKED,
    REPLACED: UIStatus.BLOCKED,
    SERVICING: UIStatus.HOLD,
    SOLD: UIStatus.HOLD,
    SPARE: UIStatus.HOLD,
    STOLEN: UIStatus.HOLD,
    "SUSP-AUTH": UIStatus.HOLD,
    SUSPECT: UIStatus.BLOCKED,
    T: UIStatus.HOLD,
    TERMINATED: UIStatus.HOLD,
    TRANSFER: UIStatus.HOLD,
    TURNED_ON: UIStatus.ACTIVE,
    TURNED_OFF: UIStatus.HOLD,
    VEHICLE: UIStatus.HOLD,
    "VEHICLE SOLD": UIStatus.HOLD,
    "Wrong PIN": UIStatus.BLOCKED
  };


const tableCards = cards.map(card => {
    card.Status = statusMap[card.Status]
    card.Card = card.Title + ' ' + card.LastFour
    card.Fleet = 'VILLAGE OF HOLMEN POLICE DEPT 608721'
    card.VehicleID = card.Alias
    card.Profile = card.ProfileName
    card.LastUsed = card.LastUpdatedDate.split('T')[0]
    card.CardType = card.cardType.title
})
console.log('tableCards', tableCards);
const handler = nc()
  .get((req, res) => {
    res.json({data: cards})
  })

export default handler